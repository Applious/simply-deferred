// Generated by CoffeeScript 1.3.1
/*
Simply Deferred - v.0.1.0
(c) 2012 Sudhir Jonathan, contact.me@sudhirjonathan.com
Released under the MIT License.
*/(function(){var a,b,c,d,e,f,g,h;h=(typeof window!="undefined"&&window!==null?window._:void 0)||require("underscore"),b="pending",d="resolved",c="rejected",f=h.flatten,g=function(a,c,d){if(a===b)return c.push.apply(c,f(d))},e=function(a,b){var c,d,e,f;f=[];for(d=0,e=a.length;d<e;d++)c=a[d],f.push(c.apply(null,b));return f},a=function(){var a,h,i,j,k,l;return k=b,i=[],j=[],a=[],h={},this.promise=function(l){var m;return l=l||{},l.state=function(){return k},m=function(a,b){if(a)return e(f(b),h)},l.done=function(){return g(k,i,arguments),m(k===d,arguments),l},l.fail=function(){return g(k,j,arguments),m(k===c,arguments),l},l.always=function(){return g(k,a,arguments),m(k!==b,arguments),l},l},this.promise(this),l=function(c,d,f){if(k===b)return k=c,h=f,e(d,h),e(a,h)},this.resolve=function(){return l(d,i,arguments),this},this.reject=function(){return l(c,j,arguments),this},this},(exports||window).when=function(){var b,c,d;return d=new a,b=f(arguments),c=h.after(b.length,d.resolve),h(b).each(function(a){return a.done(c)}),d.promise()},(exports||window).Deferred=function(){return new a}}).call(this);