// Generated by CoffeeScript 1.3.1
/*
Simply Deferred - v.1.1.3
(c) 2012 Sudhir Jonathan, contact.me@sudhirjonathan.com, MIT Licensed.
Portions of this code are inspired and borrowed from Underscore.js (http://underscorejs.org/) (MIT License)
*/(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=[].slice;b="pending",d="resolved",c="rejected",i=function(a,b){return a!=null?a.hasOwnProperty(b):void 0},k=function(a){return i(a,"length")&&i(a,"callee")},h=function(a){return k(a)?h(Array.prototype.slice.call(a)):Array.isArray(a)?a.reduce(function(a,b){return Array.isArray(b)?a.concat(h(b)):(a.push(b),a)},[]):[a]},e=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},l=function(a,b){return function(){var c;return c=[a].concat(Array.prototype.slice.call(arguments,0)),b.apply(this,c)}},g=function(a,b){var c,d,e,f,g;f=h(a),g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push(c.apply(null,b));return g},a=function(){var a,e,f,i,j,k;return k=b,i=[],j=[],a=[],f={},this.promise=function(e){var l;return e=e||{},e.state=function(){return k},l=function(a,c){return function(){return k===b&&c.push.apply(c,h(arguments)),a()&&g(arguments,f),e}},e.done=l(function(){return k===d},i),e.fail=l(function(){return k===c},j),e.always=l(function(){return k!==b},a),e},this.promise(this),e=function(c,d){return function(){return k===b&&(k=c,f=arguments,g([d,a],f)),this}},this.resolve=e(d,i),this.reject=e(c,j),this},m=function(){var b,c,d,f,g,i;f=new a,c=h(arguments),d=e(c.length,f.resolve);for(g=0,i=c.length;g<i;g++)b=c[g],b.done(d);return f.promise()},j=function(b){return b.Deferred=function(){return new a},b.ajax=l(b.ajax,function(b,c){var d,e;return c==null&&(c={}),e=new a,d=function(a,b){return l(a,function(){var a,c;return c=arguments[0],a=2<=arguments.length?n.call(arguments,1):[],c&&c.apply(null,a),b.apply(null,a)})},c.success=d(c.success,e.resolve),c.error=d(c.error,e.reject),b(c),e.promise()}),b.when=m},f=typeof exports!="undefined"?exports:this,f.Deferred=function(){return new a},f.when=m,f.installInto=j}).call(this);